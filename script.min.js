javascript:(()=>{const style=document.createElement('style');style.textContent="#floatingMenu{position:fixed;top:100px;right:10px;width:300px;max-height:450px;background:rgba(0,0,0,0.7);color:white;font-family:Arial,sans-serif;font-size:14px;border-radius:6px;box-shadow:0 0 12px black;display:flex;flex-direction:column;user-select:none;z-index:999999;overflow:hidden;transition:max-height 0.4s ease;}#floatingMenu.collapsed{max-height:40px;}#floatingMenuHeader{padding:8px 10px;background:rgba(0,0,0,0.85);cursor:move;display:flex;justify-content:space-between;align-items:center;font-weight:bold;}#floatingMenuTitle{flex-grow:1;}#floatingMenuControls{display:flex;align-items:center;}#floatingMenuControls>button:not(.keyboard-toggle){cursor:pointer;color:white;margin-left:6px;font-weight:bold;user-select:none;background:none;border:none;font-size:16px;line-height:1;padding:0;display:flex;align-items:center;justify-content:center;}#floatingMenuControls>.keyboard-toggle{cursor:pointer;color:white;font-size:16px;line-height:1;padding:4px 6px;border-radius:4px;transition:background 0.3s ease;margin-left:6px;}#floatingMenuControls>.keyboard-toggle.on{background:#2ecc71;}#floatingMenuControls>.keyboard-toggle.off{background:#7f8c8d;}#searchInput{margin:3px 10px;padding:5px 8px;border-radius:4px;border:none;font-size:14px;width:calc(100% - 20px);box-sizing:border-box;direction:rtl;}#floatingMenuList{padding:5px 10px;transition:opacity 0.4s ease;flex-grow:1;display:flex;flex-direction:column;overflow:hidden;}#floatingMenuList.fade{opacity:0;}#floatingMenuList.scrollable{overflow-y:auto;max-height:380px;}#floatingMenuList div{padding:5px 8px;border-radius:4px;margin-bottom:4px;background:rgba(255,255,255,0.1);cursor:pointer;white-space:nowrap;text-overflow:ellipsis;overflow:visible;transition:background 0.2s ease,opacity 0.3s ease;}#floatingMenuList div:hover{background:rgba(255,255,255,0.25);}#highlight{background:yellow;color:black;font-weight:bold;}#floatingMenu.collapsed #searchInput,#floatingMenu.collapsed #floatingMenuList{opacity:0;pointer-events:none;height:0;padding:0 10px;overflow:hidden !important;transition:opacity 0.4s ease,height 0.4s ease,padding 0.4s ease,margin 0.4s ease;}#floatingMenuList .active{background:orange !important;color:black !important;}";document.head.appendChild(style);const floatingMenu=document.createElement('div');floatingMenu.id='floatingMenu';const header=document.createElement('div');header.id='floatingMenuHeader';const title=document.createElement('div');title.id='floatingMenuTitle';title.textContent='פוסטים';const controls=document.createElement('div');controls.id='floatingMenuControls';const collapseButton=document.createElement('button');collapseButton.textContent='-';const closeButton=document.createElement('button');closeButton.textContent='×';const keyboardToggleButton=document.createElement('button');keyboardToggleButton.textContent='↕';keyboardToggleButton.classList.add('keyboard-toggle','on');controls.appendChild(collapseButton);controls.appendChild(closeButton);controls.appendChild(keyboardToggleButton);header.appendChild(title);header.appendChild(controls);const searchInput=document.createElement('input');searchInput.id='searchInput';searchInput.placeholder='חפש פוסטים...';const postsListContainer=document.createElement('div');postsListContainer.id='floatingMenuList';floatingMenu.appendChild(header);floatingMenu.appendChild(searchInput);floatingMenu.appendChild(postsListContainer);document.body.appendChild(floatingMenu);let keyboardNavigationEnabled=true;keyboardToggleButton.addEventListener('click',()=>{keyboardNavigationEnabled=!keyboardNavigationEnabled;if(keyboardNavigationEnabled){keyboardToggleButton.classList.remove('off');keyboardToggleButton.classList.add('on');}else{keyboardToggleButton.classList.remove('on');keyboardToggleButton.classList.add('off');}});function isHebrew(t){return/[\u0590-\u05FF]/.test(t);}function escapeRegExp(s){return s.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');}function getPosts(){return Array.from(document.querySelectorAll('h2.post-title,h3.post-title')).map((el,i)=>{const link=el.querySelector('a');const text=link?link.textContent.trim():el.textContent.trim();return{element:el,text,index:i};});}function highlightText(text,term){if(!term)return text;const re=new RegExp('('+escapeRegExp(term)+')','gi');return text.replace(re,'<span id="highlight">$1</span>');}function highlightPost(el){el.style.transition='background-color 1.5s ease';el.style.backgroundColor='yellow';setTimeout(()=>{el.style.backgroundColor='';},1500);}let activePostIndex=-1;function updatePostsList(){const term=searchInput.value.trim().toLowerCase();const posts=getPosts();postsListContainer.classList.add('fade');setTimeout(()=>{postsListContainer.innerHTML='';const filtered=posts.filter(p=>p.text.toLowerCase().includes(term));postsListContainer.classList.toggle('scrollable',filtered.length>10);if(filtered.length===0){const noResult=document.createElement('div');noResult.textContent='לא נמצאו פוסטים';noResult.style.textAlign='center';noResult.style.opacity='0.7';postsListContainer.appendChild(noResult);}else{filtered.forEach(({element,text})=>{const item=document.createElement('div');item.innerHTML=highlightText(text,term);item.style.textAlign=isHebrew(text[0])?'right':'left';item.style.direction=isHebrew(text[0])?'rtl':'ltr';item.addEventListener('click',()=>{element.scrollIntoView({behavior:'smooth',block:'center'});highlightPost(element);});postsListContainer.appendChild(item);});}activePostIndex=0;updateActiveClass(postsListContainer.querySelectorAll('div'));},200);setTimeout(()=>postsListContainer.classList.remove('fade'),250);}function updateActivePost(){const posts=getPosts();const mid=window.innerHeight/2;let closest=-1,minDist=Infinity;posts.forEach((p,i)=>{const rect=p.element.getBoundingClientRect();const dist=Math.abs(rect.top+rect.height/2-mid);if(dist<minDist){minDist=dist;closest=i;}});const items=postsListContainer.querySelectorAll('div');activePostIndex=closest;updateActiveClass(items);}function updateActiveClass(items){items.forEach((item,i)=>{item.classList.toggle('active',i===activePostIndex);if(i===activePostIndex)item.scrollIntoView({block:'nearest'});});}collapseButton.addEventListener('click',()=>floatingMenu.classList.toggle('collapsed'));closeButton.addEventListener('click',()=>floatingMenu.remove());searchInput.addEventListener('input',updatePostsList);window.addEventListener('scroll',updateActivePost);window.addEventListener('keydown',e=>{if(!keyboardNavigationEnabled)return;const items=postsListContainer.querySelectorAll('div');if(!items.length)return;if(e.key==='ArrowDown'){e.preventDefault();activePostIndex=(activePostIndex+1)%items.length;updateActiveClass(items);}if(e.key==='ArrowUp'){e.preventDefault();activePostIndex=(activePostIndex-1+items.length)%items.length;updateActiveClass(items);}if(e.key==='Enter'){e.preventDefault();const posts=getPosts();if(activePostIndex>=0&&activePostIndex<posts.length){const el=posts[activePostIndex].element;el.scrollIntoView({behavior:'smooth',block:'center'});highlightPost(el);}}});let drag=false,sx,sy,mx,my;header.addEventListener('mousedown',e=>{drag=true;sx=e.clientX;sy=e.clientY;const r=floatingMenu.getBoundingClientRect();mx=r.left;my=r.top;e.preventDefault();});window.addEventListener('mousemove',e=>{if(!drag)return;let nx=mx+(e.clientX-sx),ny=my+(e.clientY-sy);nx=Math.max(0,Math.min(nx,window.innerWidth-floatingMenu.offsetWidth));ny=Math.max(0,Math.min(ny,window.innerHeight-floatingMenu.offsetHeight));floatingMenu.style.left=nx+'px';floatingMenu.style.top=ny+'px';floatingMenu.style.right='auto';});window.addEventListener('mouseup',()=>drag=false);updatePostsList();})();
